<!DOCTYPE html>
<html>
<head>
    <title>Simple Migrator Mode Diagnostic</title>
</head>
<body>
<h1>Simple Migrator Mode Diagnostic</h1>
<p>Check the browser console (F12) for diagnostic information.</p>

<script>
// This script should be pasted into the browser console on the Simple Migrator admin page

console.log('=== Simple Migrator Diagnostic ===');

// Check if jQuery is loaded
if (typeof jQuery === 'undefined') {
    console.error('❌ jQuery is NOT loaded');
} else {
    console.log('✅ jQuery is loaded, version:', jQuery.fn.jquery);
}

// Check if smData is defined
if (typeof smData === 'undefined') {
    console.error('❌ smData is NOT defined');
} else {
    console.log('✅ smData is defined:', smData);
}

// Check if UI object exists
if (typeof UI === 'undefined') {
    console.error('❌ UI object is NOT defined');
} else {
    console.log('✅ UI object is defined');
    console.log('  - UI.init:', typeof UI.init);
    console.log('  - UI.setMode:', typeof UI.setMode);
    console.log('  - UI.showCurrentMode:', typeof UI.showCurrentMode);
}

// Check if mode buttons exist
const modeButtons = jQuery('.sm-mode-buttons button');
console.log('Mode buttons found:', modeButtons.length);
if (modeButtons.length > 0) {
    modeButtons.each(function() {
        console.log('  - Button:', jQuery(this).text().trim(), 'data-mode:', jQuery(this).data('mode'));
    });
} else {
    console.error('❌ No mode buttons found!');
}

// Check current mode value
const currentMode = jQuery('#sm-current-mode');
if (currentMode.length) {
    console.log('✅ Current mode input found, value:', currentMode.val());
} else {
    console.error('❌ Current mode input NOT found');
}

// Check if panels exist
console.log('Panels:');
console.log('  - #sm-source-panel:', jQuery('#sm-source-panel').length ? '✅' : '❌');
console.log('  - #sm-destination-panel:', jQuery('#sm-destination-panel').length ? '✅' : '❌');
console.log('  - #sm-no-mode-panel:', jQuery('#sm-no-mode-panel').length ? '✅' : '❌');

// Check mode selector visibility
const modeSelector = jQuery('.sm-mode-selector');
console.log('Mode selector visible:', modeSelector.length ? (modeSelector.is(':visible') ? '✅ YES' : '❌ NO (hidden)') : '❌ NOT FOUND');

// Test manual mode switch
console.log('\n=== Testing Manual Mode Switch ===');
try {
    jQuery('.sm-mode-buttons button').first().trigger('click');
    console.log('✅ Click event triggered on first mode button');
    setTimeout(() => {
        console.log('Current mode after click:', jQuery('#sm-current-mode').val());
        console.log('Source panel visible:', jQuery('#sm-source-panel').is(':visible'));
    }, 1000);
} catch (error) {
    console.error('❌ Error triggering click:', error);
}

console.log('\n=== Diagnostic Complete ===');
</script>

<h2>Manual Testing</h2>
<p>Try these commands in the browser console:</p>
<ul>
    <li><code>jQuery('.sm-mode-buttons button').first().click()</code></li>
    <li><code>UI.setMode('source')</code></li>
    <li><code>UI.showCurrentMode()</code></li>
    <li><code>jQuery('#sm-source-panel').show()</code></li>
</ul>

</body>
</html>
